<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="view_tpart_part_tree" model="ir.ui.view">
    <field name="name">tpart.part.tree</field>
    <field name="model">tpart.part</field>
    <field name="arch" type="xml">
      <tree string="Parts" editable="bottom">
        <field name="name"/>
        <field name="part_number"/>
        <field name="brand"/>
        <field name="model_hp"/>
        <field name="category_id"/>
        <field name="part_type"/>
        <field name="qty_on_hand" optional="show"/>
        <field name="state"/>
      </tree>
    </field>
  </record>

  <record id="view_tpart_part_form" model="ir.ui.view">
    <field name="name">tpart.part.form</field>
    <field name="model">tpart.part</field>
    <field name="arch" type="xml">
      <form string="Spare Part">
        <header>
          <button name="action_approve" type="object" string="Approve"
                  class="oe_highlight" invisible="state != 'draft'"/>
          <button name="action_set_obsolete" type="object" string="Set Obsolete"
                  invisible="state != 'approved'"/>
          <field name="state" widget="statusbar" statusbar_visible="draft,approved,obsolete"/>
        </header>
        <sheet>
          <div class="oe_title">
            <h1><field name="name" placeholder="e.g. LCD iPhone 15"/></h1>
          </div>
          <group>
            <group string="Basic">
              <field name="part_number"/>
              <field name="barcode" widget="barcode"/>
              <field name="brand"/>
              <field name="model_hp"/>
            </group>
            <group string="Details">
              <field name="category_id"/>
              <field name="part_type"/>
              <field name="uom_id"/>
              <field name="warranty_month"/>
              <field name="active" widget="boolean_toggle"/>
            </group>
          </group>
          <notebook>
            <page string="Quantities">
              <group>
                <field name="qty_on_hand"/>
                <field name="qty_reserved"/>
                <field name="qty_available"/>
              </group>
            </page>
            <page string="Linked Product">
              <field name="product_id" readonly="1"/>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <record id="view_tpart_part_kanban" model="ir.ui.view">
    <field name="name">tpart.part.kanban</field>
    <field name="model">tpart.part</field>
    <field name="arch" type="xml">
        <kanban default_group_by="state">
            <field name="name"/>
            <field name="part_number"/>
            <field name="brand"/>
            <field name="qty_on_hand"/>
            <templates>
                <t t-name="kanban-box">
                    <div class="oe_kanban_details">
                        <strong><field name="name"/></strong>
                        <div>PN: <field name="part_number"/> (<field name="brand"/>)</div>
                        <div>Stock: <field name="qty_on_hand"/></div>
                    </div>
                </t>
            </templates>
        </kanban>
    </field>
  </record>

  <record id="view_tpart_part_search" model="ir.ui.view">
    <field name="name">tpart.part.search</field>
    <field name="model">tpart.part</field>
    <field name="arch" type="xml">
      <search>
        <field name="name"/>
        <field name="part_number"/>
        <field name="brand"/>
        <field name="model_hp"/>
        <filter string="Draft" name="state_draft" domain="[('state','=','draft')]"/>
        <filter string="Approved" name="state_approved" domain="[('state','=','approved')]"/>
        <group expand="0" string="Group By">
          <filter string="Brand" name="group_brand" context="{'group_by':'brand'}"/>
          <filter string="Type" name="group_type" context="{'group_by':'part_type'}"/>
        </group>
      </search>
    </field>
  </record>

  <record id="action_tpart_part" model="ir.actions.act_window">
    <field name="name">Parts</field>
    <field name="res_model">tpart.part</field>
    <field name="view_mode">tree,kanban,form</field>
  </record>

  <menuitem id="menu_teknoparts_root" name="Gudang TeknoParts"/>
  <menuitem id="menu_tpart_part" name="Parts"
            parent="menu_teknoparts_root"
            action="action_tpart_part"
            sequence="10"/>
</odoo>